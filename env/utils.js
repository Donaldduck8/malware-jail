function _defineProperty(that, name, map) {
    Object.defineProperty(that, name, {
        get: function() {
            util_log(that._name + "." + name + ".get() => "+_truncateOutput(map[name]));
            return map[name];
        },
        set: function(v) {
            util_log(that._name + "." + name + " = '"+_truncateOutput(v)+"'");
            map[name] = v;
        }
    })
}
function _truncateOutput(v) {
    // TODO: make max_len a command line parameter
    var max_len = 250;
    if (typeof v === 'undefined')
        return "undefined";
    var vtrunc = "" + v.toString();
    if (vtrunc.length > max_len) {
        vtrunc = vtrunc.substring(0, max_len) + " ... (truncated)";
    } 
    return vtrunc.replace(/[^\x20-\x7E]/g, '?');
}
function _defineSingleProperty(that, name, intvar) {
    if (typeof intvar === 'undefined') {
        intvar = "_" + name;
        that[intvar] = "";
    }

    Object.defineProperty(that, name, {
        get: function() {
            util_log(that._name + "." + name + ".get() => ("+ typeof that[intvar] +") '"+_truncateOutput(that[intvar])+"'");
            return that[intvar];
        },
        set: function(v) {
            util_log(that._name + "." + name + " = ("+ typeof v + ") '"+_truncateOutput(v)+"'");
            that[intvar] = v;
        }
    })
}

// Strange, does not work in node
//Date.prototype.toStringOrig = Date.prototype.toString;
//
//Date.prototype.toString = function() {
//    // Node: Sat,Oct,22,2016,22:20:52,GMT+0200,(CEST)
//    // WSH:  Sat,Oct,22,22:07:32,UTC+0200,2016
//    util_log("called")
//    var a = this.toStringOrig().split(" ");
//    var b = a.slice(3);
//    b[3] = a[4]; b[4] = a[5]; b[5] = a[3];
//    return b.join(" ");
//}
//Date.prototype.inspect = Date.prototype.toString;
