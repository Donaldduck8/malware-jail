util_log("Preparing sandbox to intercept eval() calls.");
_eval_calls = [];
if (typeof _orig_eval === 'undefined')
    _orig_eval = eval;
eval = function(s) {
    _eval_calls[_eval_calls.length] = s;
    util_log("Calling eval() no.: ", (_eval_calls.length + 1)/2);
    var ns = s.replace(/try/g,'').replace(/catch/g,'\r\nfunction _mycatch');
    _eval_calls[_eval_calls.length] = ns;
    return _orig_eval(ns);
}
util_log("Preparing sandbox to intercept 'new Function()' calls.");
_Function_calls = [];
if (typeof _orig_Function === 'undefined')
    _orig_Function = Function;
Function = function() {
    _Function_calls[_Function_calls.length] = Array.prototype.slice.call(arguments, 1).join(",");
    util_log("Calling new Function('"+Array.prototype.slice.call(arguments, 1).join("', '")+"')");
    // TODO: Inject logger into the new function created
    return _orig_Function.apply(this, arguments);
}


